<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo 进阶教程</title>
      <link href="/blog-hexo/posts/b86e2546/"/>
      <url>/blog-hexo/posts/b86e2546/</url>
      
        <content type="html"><![CDATA[<h2 id="音乐">音乐</h2><blockquote><p>官方教程：<a href="https://butterfly.js.org/posts/507c070f/">Butterfly 添加全局吸底 Aplayer 教程</a></p></blockquote><h3 id="全局吸底-Aplayer">全局吸底 Aplayer</h3><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #4b4948">预览效果</summary><div class="toggle-content"><p><img src="https://niezicheng.github.io/files/images/hexo/fix-aplayer.webp" alt="fix-aplayer.webp"></p></div></details><details class="toggle" style="border: 1px solid #fff8e8"><summary class="toggle-button" style="background-color: #fff8e8;color: #4b4948">实现步骤</summary><div class="toggle-content"><ol><li>安装 <code>Aplayer</code> 插件 <a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure><ol start="2"><li>关闭 <code>asset_inject</code>，在项目根目录的 <code>_config.yml</code> 中添加配置如下：</li></ol><p>由于需要全局都插入 <code>aplayer</code> 和 <code>meting</code> 资源，为了防止插入重复的资源，需把 <code>asset_inject</code> 设为 <code>false</code>。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># aplayer</span></span><br><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><ol start="3"><li>在主题配置文件 <code>_config.butterfly.yml</code> 中开启 <code>Aplayer</code> 配置，如下所示：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject the css and script (aplayer/meting)</span></span><br><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="4"><li>插入 <code>Aplayer</code> 标签，如下所示：</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">&quot;aplayer no-destroy&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-id</span>=<span class="string">&quot;7427714271&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-server</span>=<span class="string">&quot;netease&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-type</span>=<span class="string">&quot;playlist&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-fixed</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-mini</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-listFolded</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-order</span>=<span class="string">&quot;random&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-lrctype</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-preload</span>=<span class="string">&quot;none&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-autoplay</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-theme</span>=<span class="string">&quot;#febcd5&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">muted</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>参数详细说明请参考 <a href="https://github.com/MoePlayer/hexo-tag-aplayer?tab=readme-ov-file#meingjs-support-new-in-30">Aplayer 配置参数</a>。</p></div></details><h3 id="音乐页面">音乐页面</h3><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #4b4948">预览效果</summary><div class="toggle-content"><p><img src="https://niezicheng.github.io/files/images/hexo/meting-page.webp" alt="meting-page.webp"></p></div></details><details class="toggle" style="border: 1px solid #fff8e8"><summary class="toggle-button" style="background-color: #fff8e8;color: #4b4948">实现步骤</summary><div class="toggle-content"><ol><li>创建音乐页面，新建 <code>source/music/index.md</code> 文件，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page music</span><br></pre></td></tr></table></figure><ol start="2"><li>菜单导航配置，修改主题配置文件 <code>_config.butterfly.yml</code>，添加音乐菜单导航配置，如下所示：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Menu 目录</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">娱乐</span> <span class="string">||</span> <span class="attr">fa fa-heartbeat:</span></span><br><span class="line">    <span class="string">音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br></pre></td></tr></table></figure><ol start="3"><li>音乐页面配置，修改 <code>source/music/index.md</code> 文件，内容如下：</li></ol><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting &quot;697054881&quot; &quot;netease&quot; &quot;playlist&quot; &quot;theme:&quot;#febcd5&quot; %&#125;</span><br></pre></td></tr></table></figure><p>更多用法请阅读 <a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a> 文档。</p></div></details><h2 id="图库">图库</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #4b4948">预览效果</summary><div class="toggle-content"><h3 id="GalleryGroup-图库">GalleryGroup 图库</h3><p><img src="https://niezicheng.github.io/files/images/gallery/gallery-group.webp" alt="gallery-group.webp"></p><h3 id="Gallery-相册">Gallery 相册</h3><p><img src="https://niezicheng.github.io/files/images/gallery/gallery-wallpaper.webp" alt="gallery-wallpaper.webp"></p></div></details><details class="toggle" style="border: 1px solid #fff8e8"><summary class="toggle-button" style="background-color: #fff8e8;color: #4b4948">实现步骤</summary><div class="toggle-content"><h3 id="GalleryGroup-图库">GalleryGroup 图库</h3><ol><li>创建图库页面，新建 <code>source/gallery/index.md</code> 文件，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page gallery</span><br></pre></td></tr></table></figure><ol start="2"><li>菜单导航配置，修改主题配置文件 <code>_config.butterfly.yml</code>，添加音乐菜单导航配置，如下所示：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Menu 目录</span></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">娱乐</span> <span class="string">||</span> <span class="attr">fa fa-heartbeat:</span></span><br><span class="line">    <span class="string">图库:</span> <span class="string">/gallery/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-images</span></span><br></pre></td></tr></table></figure><h4 id="用法描述">用法描述</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>是否必填</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td>是</td><td>String</td><td>图库名称</td></tr><tr><td>description</td><td>是</td><td>String</td><td>图库描述</td></tr><tr><td>link</td><td>是</td><td>String</td><td>图库地址链接</td></tr><tr><td>img-url</td><td>否</td><td>String</td><td>图库封面链接</td></tr></tbody></table><h4 id="内容展示">内容展示</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup &#x27;Wallpaper&#x27; &#x27;壁纸资源&#x27; &#x27;/gallery/wallpaper&#x27; https://xxx/wallhaven-werdv6.webp %&#125;</span><br><span class="line">&#123;% galleryGroup &#x27;Second Dimension&#x27; &#x27;二次元&#x27; &#x27;/gallery/second-dimension&#x27; https://xxx/wallhaven-z81qyy.webp %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="效果预览">效果预览</h4><p><img src="https://niezicheng.github.io/files/images/gallery/gallery-group.webp" alt="gallery-group.webp"></p><p>更多用法请阅读 <a href="https://butterfly.js.org/posts/4aa8abbe/#Gallery%E7%9B%B8%E5%86%8A%E5%9C%96%E5%BA%AB">galleryGroup</a>。</p><!-- endtab --><h3 id="Gallery-相册">Gallery 相册</h3><p>创建图库详情 <code>wallpaper</code> 页面，新建 <code>source/gallery/wallpaper/index.md</code> 文件，执行下面命令：</p><div class="tabs" id="gallery"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="gallery-1">本地</button><button type="button" class="tab " data-href="gallery-2">远程</button></ul><div class="tab-contents"><div class="tab-item-content active" id="gallery-1"><h4 id="用法描述">用法描述</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery [lazyload],[rowHeight],[limit] %&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>是否必填</th><th>类型</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>lazyload</td><td>否</td><td>Boolean</td><td>false</td><td>点击按钮加载更多图片。</td></tr><tr><td>rowHeight</td><td>否</td><td>Number</td><td>220</td><td>图片显示的高度，如果需要一行显示更多的图片，可设置更小的数字。</td></tr><tr><td>limit</td><td>否</td><td>Number</td><td>10</td><td>每次加载多少张照片。</td></tr></tbody></table><h4 id="内容展示">内容展示</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![<span class="string">wallhaven-werdv6.webp</span>](<span class="link">https://xxx/wallhaven-werdv6.webp</span>)</span><br><span class="line">![<span class="string">wallhaven-2fd962.webp</span>](<span class="link">https://xxx/wallhaven-2fd962.webp</span>)</span><br><span class="line">![<span class="string">wallhaven-6oqgk7.webp</span>](<span class="link">https://xxx/wallhaven-6oqgk7.webp</span>)</span><br><span class="line">![<span class="string">wallhaven-8o5922.webp</span>](<span class="link">https://xxx/wallhaven-8o5922.webp</span>)</span><br><span class="line">![<span class="string">wallhaven-9f1cd0.webp</span>](<span class="link">https://xxx/wallhaven-9f1cd0.webp</span>)</span><br><span class="line">![<span class="string">wallhaven-72yzje.webp</span>](<span class="link">https://xxx/wallhaven-72yzje.webp</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="gallery-2"><h4 id="用法描述">用法描述</h4><div class="gallery-container" data-type="url" data-button="[lazyload]">      <div class="gallery-data">[link]</div>      <div class="gallery-items">      </div>    </div><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">| 参数      | 是否必填 | 类型    | 默认值 | 说明                                                           |</span><br><span class="line">| --------- | -------- | ------- | ------ | -------------------------------------------------------------- |</span><br><span class="line">| url       | 是       | String  | -      | 识别词。                                                       |</span><br><span class="line">| link      | 是       | String  | -      | 远程的 json 链接。                                             |</span><br><span class="line">| lazyload  | 否       | Boolean | false  | 点击按钮加载更多图片。                                         |</span><br><span class="line">| rowHeight | 否       | Number  | 220    | 图片显示的高度，如果需要一行显示更多的图片，可设置更小的数字。 |</span><br><span class="line">| limit     | 否       | Number  | 10     | 每次加载多少张照片。                                           |</span><br></pre></td></tr></table></figure><p>远程 <code>json</code> 文件，内容格式如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://w.wallhaven.cc/full/we/wallhaven-werdv6.png&quot;</span><span class="punctuation">,</span> <span class="comment">// 图片链接, 必填</span></span><br><span class="line">    <span class="attr">&quot;alt&quot;</span><span class="punctuation">:</span> <span class="string">&quot;IMG_0556.jpg&quot;</span><span class="punctuation">,</span> <span class="comment">// 图片描述, 可选</span></span><br><span class="line">    <span class="attr">&quot;title&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这是title&quot;</span>， <span class="comment">// 图片标题, 可选</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h4 id="内容展示">内容展示</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gallery url, https://xxx.com/xxx.json %&#125;</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h4 id="效果预览-2">效果预览</h4><p><img src="https://niezicheng.github.io/files/images/gallery/gallery-wallpaper.webp" alt="gallery-wallpaper.webp"></p></div></details><h2 id="卡通人物">卡通人物</h2><details class="toggle" style="border: 1px solid #e8fafe"><summary class="toggle-button" style="background-color: #e8fafe;color: #4b4948">预览效果</summary><div class="toggle-content"><p><img src="https://niezicheng.github.io/files/images/hexo/live2d-shizuku.webp" alt="live2d-shizuku.webp"></p></div></details><details class="toggle" style="border: 1px solid #fff8e8"><summary class="toggle-button" style="background-color: #fff8e8;color: #4b4948">实现步骤</summary><div class="toggle-content"><div class="tabs" id="modal"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="modal-1">多模型（推荐）</button><button type="button" class="tab " data-href="modal-2">单模型</button></ul><div class="tab-contents"><div class="tab-item-content active" id="modal-1"><p>如果你只需要基本功能，可以直接将下面 <code>html</code> 插入到你的页面中即可，不需要安装插件。更多其它定制化功能请参考 <a href="https://github.com/stevenjoezhang/live2d-widget">live2d-widget</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="modal-2"><ol><li>安装 <code>live2d</code> 模型（看版娘）插件 <a href="https://github.com/EYHN/hexo-helper-live2d">hexo-helper-live2d</a>【很久不更新啦】，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-helper-live2d --save</span><br></pre></td></tr></table></figure><ol start="2"><li>下载指定看板娘模型，这边以 <code>live2d-widget-model-shizuku</code> 模型为例，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-shizuku --save</span><br></pre></td></tr></table></figure><p>更多模型请参考 <a href="https://github.com/xiazeyu/live2d-widget-models">live2d-widget-models</a></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></details><h2 id="鼠标移动特效">鼠标移动特效</h2><details class="toggle" style="border: 1px solid #fff8e8"><summary class="toggle-button" style="background-color: #fff8e8;color: #4b4948">实现步骤</summary><div class="toggle-content"><ol><li>在项目根目录下 <code>source</code> 文件下新建 <code>js/star-canvas.js</code> 文件，内容如下：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 鼠标滑动生成星星特效</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">startCanvas</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#star-canvas&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">onresize</span> = resizeCanvas;</span><br><span class="line">    <span class="comment">// 设置画布大小</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">resizeCanvas</span>(<span class="params"></span>) &#123;</span><br><span class="line">      canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">      canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">resizeCanvas</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置画布样式</span></span><br><span class="line">    canvas.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">`</span></span><br><span class="line"><span class="string">      position: fixed;</span></span><br><span class="line"><span class="string">      z-index: 1000;</span></span><br><span class="line"><span class="string">      pointer-events: none;</span></span><br><span class="line"><span class="string">      top: 0;</span></span><br><span class="line"><span class="string">      left: 0;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">var</span> colours = [<span class="string">&quot;#ec4c8c&quot;</span>, <span class="string">&quot;#f47466&quot;</span>, <span class="string">&quot;#a4d8fa&quot;</span>, <span class="string">&quot;#ff9900&quot;</span>, <span class="string">&quot;#febcd5&quot;</span>];</span><br><span class="line">    <span class="comment">// 鼠标移动事件</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: e.<span class="property">clientX</span>,</span><br><span class="line">        <span class="attr">y</span>: e.<span class="property">clientY</span>,</span><br><span class="line">        <span class="attr">r</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">0.5</span> + <span class="number">1.5</span>,</span><br><span class="line">        <span class="attr">td</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">4</span> - <span class="number">2</span>,</span><br><span class="line">        <span class="attr">dx</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">2</span> - <span class="number">1</span>,</span><br><span class="line">        <span class="attr">dy</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1</span> + <span class="number">1</span>,</span><br><span class="line">        <span class="attr">rot</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">90</span> + <span class="number">90</span>,</span><br><span class="line">        <span class="attr">color</span>: colours[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * colours.<span class="property">length</span>)],</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制星星</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">star</span>(<span class="params">x, y, r, l, rot</span>) &#123;</span><br><span class="line">      ctx.<span class="title function_">beginPath</span>();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        ctx.<span class="title function_">lineTo</span>(</span><br><span class="line">          <span class="title class_">Math</span>.<span class="title function_">cos</span>(((<span class="number">18</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * r + x,</span><br><span class="line">          -<span class="title class_">Math</span>.<span class="title function_">sin</span>(((<span class="number">18</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * r + y</span><br><span class="line">        );</span><br><span class="line">        ctx.<span class="title function_">lineTo</span>(</span><br><span class="line">          <span class="title class_">Math</span>.<span class="title function_">cos</span>(((<span class="number">54</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * l + x,</span><br><span class="line">          -<span class="title class_">Math</span>.<span class="title function_">sin</span>(((<span class="number">54</span> + i * <span class="number">72</span> - rot) * <span class="title class_">Math</span>.<span class="property">PI</span>) / <span class="number">180</span>) * l + y</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line">      ctx.<span class="title function_">closePath</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 绘制</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> temp = arr[i];</span><br><span class="line">        <span class="title function_">star</span>(temp.<span class="property">x</span>, temp.<span class="property">y</span>, temp.<span class="property">r</span>, temp.<span class="property">r</span> * <span class="number">3</span>, temp.<span class="property">rot</span>);</span><br><span class="line">        ctx.<span class="property">fillStyle</span> = temp.<span class="property">color</span>;</span><br><span class="line">        ctx.<span class="property">strokeStyle</span> = temp.<span class="property">color</span>;</span><br><span class="line">        ctx.<span class="property">lineWidth</span> = <span class="number">0.1</span>;</span><br><span class="line">        ctx.<span class="property">lineJoin</span> = <span class="string">&quot;round&quot;</span>;</span><br><span class="line">        ctx.<span class="title function_">fill</span>();</span><br><span class="line">        ctx.<span class="title function_">stroke</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        arr[i].<span class="property">x</span> += arr[i].<span class="property">dx</span>;</span><br><span class="line">        arr[i].<span class="property">y</span> += arr[i].<span class="property">dy</span>;</span><br><span class="line">        arr[i].<span class="property">rot</span> += arr[i].<span class="property">td</span>;</span><br><span class="line">        arr[i].<span class="property">r</span> -= <span class="number">0.015</span>;</span><br><span class="line">        <span class="keyword">if</span> (arr[i].<span class="property">r</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          arr.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定时器</span></span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>);</span><br><span class="line">      <span class="title function_">draw</span>();</span><br><span class="line">      <span class="title function_">update</span>();</span><br><span class="line">    &#125;, <span class="number">20</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 启动</span></span><br><span class="line"><span class="title function_">startCanvas</span>();</span><br></pre></td></tr></table></figure><ol start="2"><li>在主题配置文件 <code>_config.butterfly.yml</code> 中引入 <code>star-canvas.js</code> 文件，如下所示：</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># 自定义覆盖样式</span></span><br><span class="line">  <span class="attr">bottom:</span></span><br><span class="line">    <span class="comment"># 鼠标滑动星星特效</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;canvas</span> <span class="string">id=&quot;star-canvas&quot;&gt;&lt;/canvas&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/blog-hexo/js/star-canvas.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></div></details>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Twikoo 评论功能</title>
      <link href="/blog-hexo/posts/a77c77c/"/>
      <url>/blog-hexo/posts/a77c77c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在一个网站中，评论功能是一个非常重要的功能(优先实现)，可以让用户在阅读文章的同时，也可以进行评论交流。而接下来就让我们一起来看看如何在 <code>Hexo</code> 通过 <a href="https://vercel.com/">Vercel</a> + <a href="https://www.mongodb.com/">MongoDB</a> 方案搭建 <a href="https://twikoo.js.org/">Twikoo</a> 评论系统。</p><h2 id="主题评论配置">主题评论配置</h2><p>在主题配置文件 <code>_config.butterfly.yml</code> 中开启 <code>Twikoo</code> 配置，如下所示：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus/Remark42/Artalk</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Twikoo</span> <span class="comment">## 使用的评论（请注意，最多支持两个，使用逗号隔开，如果不需要请留空）</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># 是否显示评论服务商的名字</span></span><br><span class="line">  <span class="comment"># 是否为评论开启lazyload，开启后，只有滚动到评论位置时才会加载评论所需要的资源（开启 lazyload 后，评论数将不显示）</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># 是否在文章顶部显示评论数(livere、Giscus 和 utterances 不支持评论数显示)</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">true</span> <span class="comment"># 是否在首页文章卡片显示评论数(gitalk、livere 、Giscus 和 utterances 不支持评论数显示)</span></span><br></pre></td></tr></table></figure><h2 id="Twikoo-评论系统">Twikoo 评论系统</h2><blockquote><p>Twikoo 是一个简洁、安全、免费的静态网站评论系统，支持在任何静态网站上使用。更多详细信息请查看 <a href="https://twikoo.js.org/">Twikoo 文档</a>。</p></blockquote><p><code>Twikoo</code> 评论系统的特点如下：</p><div class="tabs" id="twikoo-features"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="twikoo-features-1">简单</button><button type="button" class="tab " data-href="twikoo-features-2">易用</button><button type="button" class="tab " data-href="twikoo-features-3">安全</button><button type="button" class="tab " data-href="twikoo-features-4">即时</button><button type="button" class="tab " data-href="twikoo-features-5">个性</button><button type="button" class="tab " data-href="twikoo-features-6">便捷管理</button><button type="button" class="tab " data-href="twikoo-features-7">缺点</button></ul><div class="tab-contents"><div class="tab-item-content active" id="twikoo-features-1"><ul><li>免费搭建（使用云开发 / Vercel / 私有服务器作为评论后台）</li><li>简单部署（支持云开发 / Vercel 一键部署）</li></ul></div><div class="tab-item-content" id="twikoo-features-2"><ul><li>支持回复、点赞</li><li>无需额外适配，支持搭配浅色主题与深色主题使用</li><li>支持 API 调用，批量获取文章评论数、最新评论</li><li>访客在昵称栏输入 QQ 号，会自动补全 QQ 昵称和 QQ 邮箱</li><li>访客填写数字 QQ 邮箱，会使用 QQ 头像作为评论头像</li><li>支持评论框粘贴图片（可禁用）</li><li>支持插入图片（可禁用）</li><li>支持去不图床、云开发图床</li><li>支持插入表情（可禁用）</li><li>支持 Ctrl + Enter 快捷回复</li><li>评论框内容实时保存草稿，刷新不会丢失</li><li>支持 <a href="https://twikoo.js.org/faq.html#%E5%A6%82%E4%BD%95%E5%90%AF%E7%94%A8-katex-%E6%94%AF%E6%8C%81">Katex</a> 公式</li><li>支持按语言的代码高亮</li></ul></div><div class="tab-item-content" id="twikoo-features-3"><ul><li>隐私信息安全（通过云函数控制敏感字段（邮箱、IP、环境配置等）不会泄露）</li><li>支持 Akismet 垃圾评论检测（需自行注册 <a href="https://akismet.com/">akismet.com</a>）</li><li>支持腾讯云内容安全垃圾评论检测（需自行注册<a href="https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Fcms%2Ftext%2Foverview">腾讯云内容安全</a>）</li><li>支持人工审核模式</li><li>防 XSS 注入</li><li>支持限制每个 IP 每 10 分钟最多发表多少条评论</li></ul></div><div class="tab-item-content" id="twikoo-features-4"><ul><li>支持邮件提醒（访客和博主）</li><li>支持微信提醒（仅针对博主，基于 <a href="https://sct.ftqq.com/upgrade?fr=sc">Server 酱</a>，需自行注册）</li><li>支持 QQ 提醒（仅针对博主，基于 <a href="https://qmsg.zendee.cn/">Qmsg 酱</a>，需自行注册）</li><li>支持 QQ 提醒（针对博主 QQ 或者群，基于 <a href="https://docs.go-cqhttp.org/">go-cqhttp</a>，需自己有服务器）</li></ul></div><div class="tab-item-content" id="twikoo-features-5"><ul><li>支持自定义评论框背景图片</li><li>支持自定义“博主”标识文字</li><li>支持自定义通知邮件模板</li><li>支持自定义评论框提示信息（placeholder）</li><li>支持自定义表情列表（兼容 <a href="https://cdn.jsdelivr.net/npm/owo@1.0.2/demo/OwO.json">OwO 的数据格式</a>）</li><li>支持自定义【昵称】【邮箱】【网址】必填 / 选填</li><li>支持自定义代码高亮主题</li></ul></div><div class="tab-item-content" id="twikoo-features-6"><ul><li>内嵌式管理面板，通过密码登录，可方便地查看评论、隐藏评论、删除评论、修改配置</li><li>支持隐藏管理入口，通过输入暗号显示</li><li>支持从 Valine、Artalk、Disqus 导入评论</li></ul></div><div class="tab-item-content" id="twikoo-features-7"><ul><li>不支持 IE</li><li>国外请求较慢</li></ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h2 id="MongoDB-数据库">MongoDB 数据库</h2><ol><li>申请 <a href="https://www.mongodb.com/cloud/atlas/register">MongoDB</a> 账号，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712141737041.webp" alt="image-20240712141737041.webp"></p><ol><li>项目创建，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711143753137.webp" alt="image-20240711143753137.webp"></p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711143912702.webp" alt="image-20240711143912702.webp"></p><ol><li>下图左上角选择项目，然后新建<strong>免费集群</strong>，区域推荐选择 <code>AWS / N. Virginia (us-east-1)</code>，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711144139906.webp" alt="image-20240711144139906.webp"></p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712152112679.webp" alt="image-20240712152112679.webp"></p><ol start="4"><li>点击 <code>Create Deployment</code>，配置连接集群信息，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712152353692.webp" alt="image-20240712152353692.webp"></p><div class="tabs" id="connection"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="connection-1">网络权限</button><button type="button" class="tab " data-href="connection-2">数据库权限</button><button type="button" class="tab " data-href="connection-3">连接</button><button type="button" class="tab " data-href="connection-4">连接字符串</button></ul><div class="tab-contents"><div class="tab-item-content active" id="connection-1"><p>点击 <code>Network Access</code> 链接更改并设置允许所有 <code>IP（0.0.0.0/0）</code>地址的连接，如下图所示：</p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711150010538.webp" alt="image-20240711150010538.webp"></p></div><div class="tab-item-content" id="connection-2"><p>创建集群的数据库用户，设置用户名和密码【密码需记住，后面需要】，<strong>切记</strong>：填写用户信息后，点击下面的 <code>Create Database User</code> 按钮添加用户，如下图所示：</p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712152526257.webp" alt="image-20240712152526257.webp"></p></div><div class="tab-item-content" id="connection-3"><p>点击 <code>Choose a connection method</code>，选择 <code>Drivers</code> 连接方式，如下图所示：</p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712150311568.webp" alt="image-20240712150311568.webp"></p></div><div class="tab-item-content" id="connection-4"><p>复制并保留你的连接字符串，后续 <code>Vercel</code> 部署环境变量需要使用，如下图所示：</p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712143337833.webp" alt="image-20240712143337833.webp"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><p>至此，我们已经完成了 <code>MongoDB</code> 数据库的创建和配置。下面我们将通过 <code>Vercel</code> 结合 <code>MongoDB</code> 一键部署 <code>Twikoo</code> 评论系统。</p><h2 id="Vercel-一键部署">Vercel 一键部署</h2><ul><li>Vercel 是一个面向开发人员的平台，它提供工具、工作流和基础设施，帮助您更快地构建和部署 Web 应用程序，而不需要进行额外的配置</li><li>Vercel 支持开箱即用的流行前端框架，其可伸缩、安全的基础设施遍布全球，以最佳速度为用户附近数据中心的内容提供服务</li></ul><ol><li>申请 <a href="https://vercel.com/signup">Vercel</a> 账号，可以选择 <code>Github</code> 账号来同步</li><li>点击 <a href="https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/server/vercel-min">此链接</a> 将 <code>Twikoo</code> 一键部署到 <code>Vercel</code>，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711150407170.webp" alt="image-20240711150407170.webp"></p><ol start="3"><li>点击 <code>Create</code>，等待 <code>Deploy</code> 完成，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711150515700.webp" alt="image-20240711150515700.webp"></p><ol><li>进入 <code>Settings</code> -&gt; <code>Environment Variables</code>，添加环境变量 <code>MONGODB_URI</code>，值为上面 <code>MongoDB</code> 配置步骤 4 连接字符串处保留的信息【注意将字符串中用户密码替换】，配置完成后点击 <code>Save</code>，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712144918073.webp" alt="image-20240712144918073.webp"></p><ol><li>进入 <code>Deployments</code>，然后在任意一项后面点击更多「三个点」，然后点击 <code>Redeploy</code> 重新部署，如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711151453763.webp" alt="image-20240711151453763.webp"></p><p><code>Vercel Domains</code>（包含 <code>https://</code> 前缀，例如 <code>https://xxx.vercel.app</code>）即为下面主题配置 <code>twikoo</code> 所需的环境 <code>envId</code></p><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240711163943249.webp" alt="image-20240711163943249.webp"></p><ol start="6"><li>在项目主题配置文件 <code>_config.butterfly.yml</code> 中修改以下内容，将你的环境 <code>id</code> 填入对应位置</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Twikoo</span></span><br><span class="line"><span class="comment"># https://github.com/imaegoo/twikoo</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span> <span class="string">https://xxx.vercel.app/</span> <span class="comment"># 环境id</span></span><br><span class="line">  <span class="attr">region:</span> <span class="comment"># 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># 是否显示文章閲读数</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># 可选配置</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>重新编译运行，即可看到效果，点击评论区输入框下方的齿轮状按钮，设置你的管理密码，按照注解进行配置即可。</p></div><h2 id="结语">结语</h2><p>通过上面的步骤，我们就可以在 <code>Hexo</code> 中通过 <a href="https://vercel.com/">Vercel</a> + <a href="https://www.mongodb.com/">MongoDB</a> 方案搭建 <a href="https://twikoo.js.org/">Twikoo</a> 评论系统。希望本文对你有所帮助，如有疑问或建议，欢迎留言交流。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Twikoo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 及 Butterfly 主题安装、部署</title>
      <link href="/blog-hexo/posts/380b088c/"/>
      <url>/blog-hexo/posts/380b088c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近稍微有点时间，想着重新搭建下自己的个人站点。经过一番对比，最终选择了静态博客框架 <code>Hexo</code> + <code>Butterfly</code> 主题。</p><p><strong>那么为什么选择 Hexo 且选择 Butterfly 主题呢？</strong></p><ul><li><code>Hexo</code> 是一个快速、简洁且高效的博客框架，基于 <code>Node.js</code> 开发，支持 <code>Markdown</code> 编写文章，支持主题和插件扩展，可以<strong>快速搭建</strong>一个博客网站。</li><li><code>Butterfly</code> 主题是一个简洁、优雅的主题，支持多种配置，支持多种插件，支持多种功能，适合个人站点使用。</li><li><code>Hexo</code> 的社区活跃，不仅有很多优秀的主题和插件可供选择，而且在此基础上还可以满足更多的个性化需求。</li></ul><div class="note info flat"><p>预览地址：<a href="https://niezicheng.github.io/blog-hexo/">Arvinjun の站点</a></p></div><h2 id="介绍">介绍</h2><p><a href="https://hexo.io/">Hexo</a> 是一个快速、简洁且高效的博客框架，基于 <a href="https://nodejs.org/">Node.js</a> 开发，支持 <a href="https://daringfireball.net/projects/markdown/">Markdown</a> 编写文章，支持主题和插件扩展，可以快速搭建一个博客网站。本文主要介绍 <code>Hexo</code> 和 <a href="https://butterfly.js.org/">Butterfly</a> 主题的搭建和部署。</p><h2 id="安装-Hexo-及-Butterfly-主题">安装 Hexo 及 Butterfly 主题</h2><h3 id="安装-Hexo">安装 Hexo</h3><p>全局安装 Hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>初始化项目，如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog-hexo</span><br><span class="line">cd blog-hexo</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240709112207310.webp" alt="image-20240709112207310.webp"></p><h3 id="安装-Butterfly-主题">安装 Butterfly 主题</h3><p>在 Hexo 项目中安装 <code>Butterfly</code> 主题，在项目根目录执行下面命令会将 <code>Butterfly</code> 主题下载到 <code>themes/butterfly</code> 目录下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>注意：提交代码时候需要删除 <code>themes/butterfly</code> 目录下的 <code>.git</code> 文件夹，防止仓库冲突。</p></div><h4 id="应用主题">应用主题</h4><p>修改 Hexo 项目的 <code>_config.yml</code> 文件，将 <code>theme</code> 配置项修改为 <code>butterfly</code>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><h4 id="安装插件">安装插件</h4><p>如果你没有 <code>pug</code> 以及 <code>stylus</code> 的渲染器，安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h4 id="后续升级建议">后续升级建议</h4><p>为了减少升级主题带来的不便，建议将主题配置文件 <code>themes/butterfly/_config.yml</code> 复制一份到根目录下并重命名为 <code>_config.butterfly.yml</code>，之后所有的主题相关配置都在 <code>_config.butterfly.yml</code> 文件中修改即可。</p><div class="note warning flat"><p>注意：<code>Hexo</code> 会自动合并主题中的 <code>_config.yml</code> 文件和根目录下的 <code>_config.butterfly.yml</code> 主题配置内容，且 <code>_config.butterfly.yml</code> 主题文件配置优先级更高。</p></div><h2 id="启动-Hexo-服务">启动 Hexo 服务</h2><p>在 <code>Hexo</code> 项目根目录执行下面命令启动 <code>Hexo</code> 服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>打开浏览器访问 <code>http://localhost:4000/</code> 即可查看 <code>Hexo</code> 博客网站。</p><h2 id="部署-Hexo-项目">部署 Hexo 项目</h2><p>笔者这边仍是通过 <code>GitHub Pages</code> 部署 <code>Hexo</code> 项目，运行部署命令前，建议先简单了解下我的另一篇文章 <a href="https://juejin.cn/post/7311907901047160882">Github Actions 自动化部署</a>。</p><h3 id="配置部署">配置部署</h3><p>在 <code>Hexo</code> 项目根目录下的 <code>_config.yml</code> 文件中配置 <code>deploy</code> 部署信息：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 线上访问的站点地址</span></span><br><span class="line"><span class="attr">url:</span> <span class="comment"># 线上访问的站点域名地址</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/blog-hexo</span> <span class="comment"># 站点根目录路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署配置</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># 你的仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span> <span class="comment"># 你需要部署分支</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>我部署的站点根目录路径为 <code>/blog-hexo</code>，所以上面 root 设置为 <code>//blog-hexo</code>。如果设置了根路径，那么在项目中资源引用也应添加该根路径前缀，否则可能无法正常访问资源。</p></div><h3 id="执行部署">执行部署</h3><ol><li>创建你的部署分支，笔者这边是 <code>gh-pages</code> 分支，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b gh-pages</span><br></pre></td></tr></table></figure><ol start="2"><li>在 <code>Github</code> 仓库设置中将 <code>gh-pages</code> 分支设置为 <code>GitHub Pages</code> 的源。如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240712100751477.webp" alt="image-20240712100751477.webp"></p><ol start="3"><li>在 <code>Hexo</code> 项目根目录执行下面命令部署 <code>Hexo</code> 项目：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><ol start="4"><li>对应 <code>Action</code> 下 <code>page-build-deployment</code> 任务部署成功后，打开浏览器访问 <code>https://&lt;username&gt;.github.io/&lt;repository&gt;/</code> 即可查看 <code>Hexo</code> 博客网站。 如下图所示：</li></ol><p><img src="https://niezicheng.github.io/files/images/hexo/image-20240719105253201.webp" alt="image-20240719105253201.webp"></p><h2 id="结语">结语</h2><p>至此，<code>Hexo</code> 及 <code>Butterfly</code> 主题安装、部署完成。如果你有更好的建议或者更好的主题推荐，欢迎留言交流。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 主题 </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
