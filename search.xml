<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>hexo-twikoo-评论</title>
      <link href="/blog-hexo/posts/a77c77c/"/>
      <url>/blog-hexo/posts/a77c77c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在一个网站中，评论功能是一个非常重要的功能(优先实现)，可以让用户在阅读文章的同时，也可以进行评论交流。而接下来就让我们一起来看看如何在 <code>Hexo</code> 通过 <a href="https://vercel.com/">Vercel</a> + <a href="https://www.mongodb.com/">MongoDB</a> 方案搭建 <a href="https://twikoo.js.org/">Twikoo</a> 评论系统。</p><h2 id="主题评论配置">主题评论配置</h2><p>在主题配置文件 <code>_config.butterfly.yml</code> 中开启 <code>Twikoo</code> 配置，如下所示：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus/Remark42/Artalk</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Twikoo</span> <span class="comment">## 使用的评论（请注意，最多支持两个，使用逗号隔开，如果不需要请留空）</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># 是否显示评论服务商的名字</span></span><br><span class="line">  <span class="comment"># 是否为评论开启lazyload，开启后，只有滚动到评论位置时才会加载评论所需要的资源（开启 lazyload 后，评论数将不显示）</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># 是否在文章顶部显示评论数(livere、Giscus 和 utterances 不支持评论数显示)</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">true</span> <span class="comment"># 是否在首页文章卡片显示评论数(gitalk、livere 、Giscus 和 utterances 不支持评论数显示)</span></span><br></pre></td></tr></table></figure><h2 id="Twikoo-评论系统">Twikoo 评论系统</h2><blockquote><p>Twikoo 是一个简洁、安全、免费的静态网站评论系统，支持在任何静态网站上使用。更多详细信息请查看 <a href="https://twikoo.js.org/">Twikoo 文档</a>。</p></blockquote><p><code>Twikoo</code> 评论系统的特点如下：</p><div class="tabs" id="twikoo-features"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="twikoo-features-1">简单</button><button type="button" class="tab " data-href="twikoo-features-2">易用</button><button type="button" class="tab " data-href="twikoo-features-3">安全</button><button type="button" class="tab " data-href="twikoo-features-4">即时</button><button type="button" class="tab " data-href="twikoo-features-5">个性</button><button type="button" class="tab " data-href="twikoo-features-6">便捷管理</button><button type="button" class="tab " data-href="twikoo-features-7">缺点</button></ul><div class="tab-contents"><div class="tab-item-content active" id="twikoo-features-1"><ul><li>免费搭建（使用云开发 / Vercel / 私有服务器作为评论后台）</li><li>简单部署（支持云开发 / Vercel 一键部署）</li></ul></div><div class="tab-item-content" id="twikoo-features-2"><ul><li>支持回复、点赞</li><li>无需额外适配，支持搭配浅色主题与深色主题使用</li><li>支持 API 调用，批量获取文章评论数、最新评论</li><li>访客在昵称栏输入 QQ 号，会自动补全 QQ 昵称和 QQ 邮箱</li><li>访客填写数字 QQ 邮箱，会使用 QQ 头像作为评论头像</li><li>支持评论框粘贴图片（可禁用）</li><li>支持插入图片（可禁用）</li><li>支持去不图床、云开发图床</li><li>支持插入表情（可禁用）</li><li>支持 Ctrl + Enter 快捷回复</li><li>评论框内容实时保存草稿，刷新不会丢失</li><li>支持 <a href="https://twikoo.js.org/faq.html#%E5%A6%82%E4%BD%95%E5%90%AF%E7%94%A8-katex-%E6%94%AF%E6%8C%81">Katex</a> 公式</li><li>支持按语言的代码高亮</li></ul></div><div class="tab-item-content" id="twikoo-features-3"><ul><li>隐私信息安全（通过云函数控制敏感字段（邮箱、IP、环境配置等）不会泄露）</li><li>支持 Akismet 垃圾评论检测（需自行注册 <a href="https://akismet.com/">akismet.com</a>）</li><li>支持腾讯云内容安全垃圾评论检测（需自行注册<a href="https://cloud.tencent.com/login?s_url=https%3A%2F%2Fconsole.cloud.tencent.com%2Fcms%2Ftext%2Foverview">腾讯云内容安全</a>）</li><li>支持人工审核模式</li><li>防 XSS 注入</li><li>支持限制每个 IP 每 10 分钟最多发表多少条评论</li></ul></div><div class="tab-item-content" id="twikoo-features-4"><ul><li>支持邮件提醒（访客和博主）</li><li>支持微信提醒（仅针对博主，基于 <a href="https://sct.ftqq.com/upgrade?fr=sc">Server 酱</a>，需自行注册）</li><li>支持 QQ 提醒（仅针对博主，基于 <a href="https://qmsg.zendee.cn/">Qmsg 酱</a>，需自行注册）</li><li>支持 QQ 提醒（针对博主 QQ 或者群，基于 <a href="https://docs.go-cqhttp.org/">go-cqhttp</a>，需自己有服务器）</li></ul></div><div class="tab-item-content" id="twikoo-features-5"><ul><li>支持自定义评论框背景图片</li><li>支持自定义“博主”标识文字</li><li>支持自定义通知邮件模板</li><li>支持自定义评论框提示信息（placeholder）</li><li>支持自定义表情列表（兼容 <a href="https://cdn.jsdelivr.net/npm/owo@1.0.2/demo/OwO.json">OwO 的数据格式</a>）</li><li>支持自定义【昵称】【邮箱】【网址】必填 / 选填</li><li>支持自定义代码高亮主题</li></ul></div><div class="tab-item-content" id="twikoo-features-6"><ul><li>内嵌式管理面板，通过密码登录，可方便地查看评论、隐藏评论、删除评论、修改配置</li><li>支持隐藏管理入口，通过输入暗号显示</li><li>支持从 Valine、Artalk、Disqus 导入评论</li></ul></div><div class="tab-item-content" id="twikoo-features-7"><ul><li>不支持 IE</li><li>国外请求较慢</li></ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h2 id="MongoDB-数据库">MongoDB 数据库</h2><ol><li>申请 <a href="https://www.mongodb.com/cloud/atlas/register">MongoDB</a> 账号，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/c60aad7b898c4002b42e2e5cd6aa463b~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854277&amp;x-orig-sign=WkTGp3LsbDUE0iko%2B4khXuRlopc%3D" alt="image-20240712141737041.png"></p><ol start="2"><li>项目创建，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/2d68ab51d7f14d7f94e182f2c1852274~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854321&amp;x-orig-sign=cj%2B7kVuvW6gEBJ7VArb6VLI4CDI%3D" alt="image-20240711143753137.png"></p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/f995581f655f4ef59ccc715e616dedae~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854430&amp;x-orig-sign=iIpygu02qYTXQxio9soAXAZmuh0%3D" alt="image-20240711143912702.png"></p><ol><li>下图左上角选择项目，然后新建<strong>免费集群</strong>，区域推荐选择 <code>AWS / N. Virginia (us-east-1)</code>，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/4827b1e9e50e4207b3a5667ba2b7fb7d~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854430&amp;x-orig-sign=pR5ECQtgtQjvvGEIr2erluRR7%2B4%3D" alt="image-20240711144139906.png"></p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/9c7ee98fca34438aaec91cc95241d6e3~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720856758&amp;x-orig-sign=zxv19UYT%2FxQsOBy3pIQvBaqg4wM%3D" alt="image-20240712152112679.png"></p><ol start="4"><li>点击 <code>Create Deployment</code>，配置连接集群信息，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/d8f68c4750294c5ea8f374feab93b2f0~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720856758&amp;x-orig-sign=kPA8EiJqfz5LaUuLnCTKIgTdXqc%3D" alt="image-20240712152353692.png"></p><div class="tabs" id="connection"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="connection-1">网络权限</button><button type="button" class="tab " data-href="connection-2">数据库权限</button><button type="button" class="tab " data-href="connection-3">连接</button><button type="button" class="tab " data-href="connection-4">连接字符串</button></ul><div class="tab-contents"><div class="tab-item-content active" id="connection-1"><p>点击 <code>Network Access</code> 链接更改并设置允许所有 <code>IP（0.0.0.0/0）</code>地址的连接，如下图所示：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/124bc6b9825846cf9fd043cfb7af7869~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854631&amp;x-orig-sign=uuOVUoBDvW2g9UlrKX%2FLf2ggiJo%3D" alt="image-20240711150010538.png"></p></div><div class="tab-item-content" id="connection-2"><p>创建集群的数据库用户，设置用户名和密码【密码需记住，后面需要】，<strong>切记</strong>：填写用户信息后，点击下面的 <code>Create Database User</code> 按钮添加用户，如下图所示：<br><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/e9358452d4bb4843906589b0e9a5eb43~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720856758&amp;x-orig-sign=%2FIUd2JPsgElbAjxyyafo5nRxxhE%3D" alt="image-20240712152526257.png"></p></div><div class="tab-item-content" id="connection-3"><p>点击 <code>Choose a connection method</code>，选择 <code>Drivers</code> 连接方式，如下图所示：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/0797ef4c9dbe40678cc6ba77e5979378~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720855083&amp;x-orig-sign=P0nYVJl64AOkkiMYJWGwwls4zrE%3D" alt="image-20240712150311568.png"></p></div><div class="tab-item-content" id="connection-4"><p>复制并保留你的连接字符串，后续 <code>Vercel</code> 部署环境变量需要使用，如下图所示：</p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/1576077cf383472fb0706d2aad1c18c4~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854642&amp;x-orig-sign=jXnLkeJlyfEmADKIAqSbRRlmDeM%3D" alt="image-20240712143337833.png"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><p>至此，我们已经完成了 <code>MongoDB</code> 数据库的创建和配置。下面我们将通过 <code>Vercel</code> 结合 <code>MongoDB</code> 一键部署 <code>Twikoo</code> 评论系统。</p><h2 id="Vercel-一键部署">Vercel 一键部署</h2><ul><li>Vercel 是一个面向开发人员的平台，它提供工具、工作流和基础设施，帮助您更快地构建和部署 Web 应用程序，而不需要进行额外的配置</li><li>Vercel 支持开箱即用的流行前端框架，其可伸缩、安全的基础设施遍布全球，以最佳速度为用户附近数据中心的内容提供服务</li></ul><ol><li>申请 <a href="https://vercel.com/signup">Vercel</a> 账号，可以选择 <code>Github</code> 账号来同步</li><li>点击 <a href="https://vercel.com/import/project?template=https://github.com/imaegoo/twikoo/tree/main/src/server/vercel-min">此链接</a> 将 <code>Twikoo</code> 一键部署到 <code>Vercel</code>，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/6f9722dfd2f64904b5ed53de7c669c5f~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854660&amp;x-orig-sign=dktWAQEittw7Pd88q9YXx451tNg%3D" alt="image-20240711150407170.png"></p><ol start="3"><li>点击 <code>Create</code>，等待 <code>Deploy</code> 完成，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/b9628d8d5653421ca92459b4540baa6d~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854660&amp;x-orig-sign=xCiVdnmHcnjLVSBzObPkPBAPc9s%3D" alt="image-20240711150515700.png"></p><ol><li>进入 <code>Settings</code> -&gt; <code>Environment Variables</code>，添加环境变量 <code>MONGODB_URI</code>，值为上面 <code>MongoDB</code> 配置步骤 4 连接字符串处保留的信息【注意将字符串中用户密码替换】，配置完成后点击 <code>Save</code>，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/febf851941a54150acdd64f61afd44b5~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854649&amp;x-orig-sign=soYkOG4jR683F7Z3TCjOm1X4CTw%3D" alt="image-20240712144918073.png"></p><ol><li>进入 <code>Deployments</code>，然后在任意一项后面点击更多「三个点」，然后点击 <code>Redeploy</code> 重新部署，如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/eefd46f1aee24af5b06156f994618dc5~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854660&amp;x-orig-sign=jHg0B65y4sEVC63mJBbXxWCsTCs%3D" alt="image-20240711151453763.png"></p><p><code>Vercel Domains</code>（包含 <code>https://</code> 前缀，例如 <code>https://xxx.vercel.app</code>）即为下面主题配置 <code>twikoo</code> 所需的环境 <code>envId</code></p><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/60b7bed091ee4b54ba001e9be7b510f8~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720854683&amp;x-orig-sign=qOH1aTdW%2Ba7AbKV%2B35fgZg0uy%2Bk%3D" alt="image-20240711163943249.png"></p><ol start="6"><li>在项目主题配置文件 <code>_config.butterfly.yml</code> 中修改以下内容，将你的环境 <code>id</code> 填入对应位置</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Twikoo</span></span><br><span class="line"><span class="comment"># https://github.com/imaegoo/twikoo</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span> <span class="string">https://xxx.vercel.app/</span> <span class="comment"># 环境id</span></span><br><span class="line">  <span class="attr">region:</span> <span class="comment"># 环境地域，默认为 ap-shanghai，如果您的环境地域不是上海，需传此参数</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">true</span> <span class="comment"># 是否显示文章閲读数</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># 可选配置</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>重新编译运行，即可看到效果，点击评论区输入框下方的齿轮状按钮，设置你的管理密码，按照注解进行配置即可。</p></div><h2 id="结语">结语</h2><p>通过上面的步骤，我们就可以在 <code>Hexo</code> 中通过 <a href="https://vercel.com/">Vercel</a> + <a href="https://www.mongodb.com/">MongoDB</a> 方案搭建 <a href="https://twikoo.js.org/">Twikoo</a> 评论系统。希望本文对你有所帮助，如有疑问或建议，欢迎留言交流。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Twikoo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 及 Butterfly 主题安装、部署</title>
      <link href="/blog-hexo/posts/380b088c/"/>
      <url>/blog-hexo/posts/380b088c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近稍微有点时间，想着重新搭建下自己的个人站点。经过一番对比，最终选择了静态博客框架 <code>Hexo</code> + <code>Butterfly</code> 主题。</p><p><strong>那么为什么选择 Hexo 且选择 Butterfly 主题呢？</strong></p><ul><li><code>Hexo</code> 是一个快速、简洁且高效的博客框架，基于 <code>Node.js</code> 开发，支持 <code>Markdown</code> 编写文章，支持主题和插件扩展，可以<strong>快速搭建</strong>一个博客网站。</li><li><code>Butterfly</code> 主题是一个简洁、优雅的主题，支持多种配置，支持多种插件，支持多种功能，适合个人站点使用。</li><li><code>Hexo</code> 的社区活跃，不仅有很多优秀的主题和插件可供选择，而且在此基础上还可以满足更多的个性化需求。</li></ul><div class="note info flat"><p>预览地址：<a href="https://niezicheng.github.io/blog-hexo/">Arvinjun の站点</a></p></div><h2 id="介绍">介绍</h2><p><a href="https://hexo.io/">Hexo</a> 是一个快速、简洁且高效的博客框架，基于 <a href="https://nodejs.org/">Node.js</a> 开发，支持 <a href="https://daringfireball.net/projects/markdown/">Markdown</a> 编写文章，支持主题和插件扩展，可以快速搭建一个博客网站。本文主要介绍 <code>Hexo</code> 和 <a href="https://butterfly.js.org/">Butterfly</a> 主题的搭建和部署。</p><h2 id="安装-Hexo-及-Butterfly-主题">安装 Hexo 及 Butterfly 主题</h2><h3 id="安装-Hexo">安装 Hexo</h3><p>全局安装 Hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>初始化项目，如下所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog-hexo</span><br><span class="line">cd blog-hexo</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/ea3aafad18344220b0e2b8391ec01d33~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720839090&amp;x-orig-sign=QIsChWnOXBwcfLQuqUm%2BV0mRt8E%3D" alt="image-20240709112207310.png"></p><h3 id="安装-Butterfly-主题">安装 Butterfly 主题</h3><p>在 Hexo 项目中安装 <code>Butterfly</code> 主题，在项目根目录执行下面命令会将 <code>Butterfly</code> 主题下载到 <code>themes/butterfly</code> 目录下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/butterfly</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>注意：提交代码时候需要删除 <code>themes/butterfly</code> 目录下的 <code>.git</code> 文件夹，防止仓库冲突。</p></div><h4 id="应用主题">应用主题</h4><p>修改 Hexo 项目的 <code>_config.yml</code> 文件，将 <code>theme</code> 配置项修改为 <code>butterfly</code>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure><h4 id="安装插件">安装插件</h4><p>如果你没有 <code>pug</code> 以及 <code>stylus</code> 的渲染器，安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><h4 id="后续升级建议">后续升级建议</h4><p>为了减少升级主题带来的不便，建议将主题配置文件 <code>themes/butterfly/_config.yml</code> 复制一份到根目录下并重命名为 <code>_config.butterfly.yml</code>，之后所有的主题相关配置都在 <code>_config.butterfly.yml</code> 文件中修改即可。</p><div class="note warning flat"><p>注意：<code>Hexo</code> 会自动合并主题中的 <code>_config.yml</code> 文件和根目录下的 <code>_config.butterfly.yml</code> 主题配置内容，且 <code>_config.butterfly.yml</code> 主题文件配置优先级更高。</p></div><h2 id="启动-Hexo-服务">启动 Hexo 服务</h2><p>在 <code>Hexo</code> 项目根目录执行下面命令启动 <code>Hexo</code> 服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><p>打开浏览器访问 <code>http://localhost:4000/</code> 即可查看 <code>Hexo</code> 博客网站。</p><h2 id="部署-Hexo-项目">部署 Hexo 项目</h2><p>笔者这边仍是通过 <code>GitHub Pages</code> 部署 <code>Hexo</code> 项目，运行部署命令前，建议先简单了解下我的另一篇文章 <a href="https://juejin.cn/post/7311907901047160882">Github Actions 自动化部署</a>。</p><h3 id="配置部署">配置部署</h3><p>在 <code>Hexo</code> 项目根目录下的 <code>_config.yml</code> 文件中配置 <code>deploy</code> 部署信息：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 线上访问的站点地址</span></span><br><span class="line"><span class="attr">url:</span> <span class="comment"># 线上访问的站点域名地址</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/blog-hexo</span> <span class="comment"># 站点根目录路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部署配置</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># 你的仓库地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span> <span class="comment"># 你需要部署分支</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p>我部署的站点根目录路径为 <code>/blog-hexo</code>，所以上面 root 设置为 <code>//blog-hexo</code>。如果设置了根路径，那么在项目中资源引用也应添加该根路径前缀，否则可能无法正常访问资源。</p></div><h3 id="执行部署">执行部署</h3><ol><li>创建你的部署分支，笔者这边是 <code>gh-pages</code> 分支，执行下面命令：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b gh-pages</span><br></pre></td></tr></table></figure><ol start="2"><li>在 <code>Github</code> 仓库设置中将 <code>gh-pages</code> 分支设置为 <code>GitHub Pages</code> 的源。如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/b0018dfc0573481c81a6f4fdd924eac5~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720839286&amp;x-orig-sign=UIPhPNIcpYDybI1pmVopuD0cQig%3D" alt="image-20240712100751477.png"></p><ol start="3"><li>在 <code>Hexo</code> 项目根目录执行下面命令部署 <code>Hexo</code> 项目：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><ol start="4"><li>对应 <code>Action</code> 下 <code>page-build-deployment</code> 任务部署成功后，打开浏览器访问 <code>https://&lt;username&gt;.github.io/&lt;repository&gt;/</code> 即可查看 <code>Hexo</code> 博客网站。 如下图所示：</li></ol><p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/e3d16135a961418399d7d0cfde18f6ba~tplv-73owjymdk6-watermark.image?policy=eyJ2bSI6MywidWlkIjoiMjk0NjM0Njg5NDc1OTMxOSJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1720839516&amp;x-orig-sign=yisr1QXhNyImL8iQwUboLBsnPAg%3D" alt="image-20240712105802028.png"></p><h2 id="结语">结语</h2><p>至此，<code>Hexo</code> 及 <code>Butterfly</code> 主题安装、部署完成。如果你有更好的建议或者更好的主题推荐，欢迎留言交流。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 主题 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
